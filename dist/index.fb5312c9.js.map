{"mappings":"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","sources":["src/index.ts"],"sourcesContent":["function toRadians(degrees: number) {\r\n  return (degrees * Math.PI) / 180;\r\n}\r\n\r\ntype Entity = {\r\n  id: string;\r\n  stale: boolean;\r\n  render(ctx: CanvasRenderingContext2D): void;\r\n  update(isPressed: (key: Key) => boolean): void;\r\n};\r\n\r\ntype Collides = Physical & {\r\n  bbox: {\r\n    width: number;\r\n    height: number;\r\n  };\r\n  onCollisionWith(entity: Entity): void;\r\n};\r\n\r\nfunction collidesWith(rect1: Collides, rect2: Collides): boolean {\r\n  return (\r\n    rect1.x - rect1.bbox.width / 2 < rect2.x - rect2.bbox.width / 2 + rect2.bbox.width &&\r\n    rect1.x - rect1.bbox.width / 2 + rect1.bbox.width > rect2.x + rect2.bbox.width &&\r\n    rect1.y - rect1.bbox.height / 2 < rect2.y - rect2.bbox.height / 2 + rect2.bbox.height &&\r\n    rect1.bbox.height + rect1.y - rect1.bbox.height / 2 > rect2.y - rect2.bbox.height / 2\r\n  );\r\n}\r\n\r\ntype Physical = {\r\n  x: number;\r\n  y: number;\r\n  vx: number;\r\n  vy: number;\r\n};\r\n\r\ntype Bounded = {\r\n  width: number;\r\n  height: number;\r\n};\r\n\r\nfunction physicalUpdate(physical: Physical) {\r\n  physical.x += physical.vx;\r\n  physical.y += physical.vy;\r\n}\r\n\r\ntype Asteroid = Physical & Bounded;\r\ntype Bullet = Physical;\r\n\r\nfunction asteroidEntity(\r\n  asteroid: Asteroid,\r\n  onSpawnAsteroid: (asteroid: Asteroid) => void\r\n): Entity & Asteroid & Collides {\r\n  return {\r\n    id: \"asteroid\",\r\n    stale: false,\r\n    bbox: {\r\n      width: asteroid.width,\r\n      height: asteroid.height,\r\n    },\r\n    ...asteroid,\r\n    render(ctx: CanvasRenderingContext2D) {\r\n      ctx.strokeStyle = \"white\";\r\n      ctx.strokeRect(this.x - this.width / 2, this.y - this.height / 2, this.width, this.height);\r\n    },\r\n    update(_isPressed) {\r\n      if (this.height * this.width < 400) {\r\n        this.stale = true;\r\n      }\r\n      physicalUpdate(this);\r\n    },\r\n    onCollisionWith(entity) {\r\n      if (entity.id === \"bullet\") {\r\n        const dx = this.vx;\r\n        const dy = this.vy;\r\n\r\n        const asteroidLeft: Asteroid = {\r\n          ...this,\r\n          width: this.height / Math.sqrt(2),\r\n          height: this.width / Math.sqrt(2),\r\n          vx: dx,\r\n          vy: -dy,\r\n        };\r\n        const asteroidRight: Asteroid = {\r\n          ...this,\r\n          width: this.width / Math.sqrt(2),\r\n          height: this.height / Math.sqrt(2),\r\n          vx: -dx,\r\n          vy: dy,\r\n        };\r\n        this.stale = true;\r\n        onSpawnAsteroid(asteroidLeft);\r\n        onSpawnAsteroid(asteroidRight);\r\n      }\r\n    },\r\n  };\r\n}\r\n\r\nfunction bulletEntity(bullet: Bullet): Entity & Bullet & Collides {\r\n  const spawnTime = Date.now();\r\n  return {\r\n    id: \"bullet\",\r\n    stale: false,\r\n    ...bullet,\r\n    bbox: {\r\n      height: 3,\r\n      width: 3,\r\n    },\r\n    render(ctx: CanvasRenderingContext2D) {\r\n      ctx.fillStyle = \"white\";\r\n      ctx.fillRect(this.x - 1, this.y - 1, 3, 3);\r\n    },\r\n    update(isPressed) {\r\n      physicalUpdate(this);\r\n      if (Date.now() - spawnTime > 1000) {\r\n        this.stale = true;\r\n      }\r\n    },\r\n    onCollisionWith(entity) {\r\n      if (entity.id === \"asteroid\") {\r\n        this.stale = true;\r\n      }\r\n    },\r\n  };\r\n}\r\n\r\ntype Ship = Physical & {\r\n  speed: number;\r\n  theta: number;\r\n  friction: number;\r\n};\r\n\r\nfunction shipEntity(ship: Ship, onCreateBullet: (bullet: Bullet) => void): Entity & Ship & Collides {\r\n  return {\r\n    id: \"ship\",\r\n    stale: false,\r\n    ...ship,\r\n    bbox: {\r\n      width: 30,\r\n      height: 35,\r\n    },\r\n    render(ctx) {\r\n      drawTriangle(ctx, \"white\", this.x, this.y, 30, 35, this.theta);\r\n    },\r\n    update(isPressed) {\r\n      const cosine = Math.cos(toRadians(this.theta - 90));\r\n      const sine = Math.sin(toRadians(this.theta - 90));\r\n      if (isPressed(Key.LEFT)) {\r\n        this.theta = (this.theta - 5) % 360;\r\n      }\r\n      if (isPressed(Key.RIGHT)) {\r\n        this.theta = (this.theta + 5) % 360;\r\n      }\r\n      if (isPressed(Key.UP)) {\r\n        this.vx += cosine * this.speed;\r\n        this.vy += sine * this.speed;\r\n      }\r\n      if (isPressed(Key.DOWN)) {\r\n        this.vx -= cosine * this.speed;\r\n        this.vy -= sine * this.speed;\r\n      }\r\n\r\n      this.vx *= 1 - this.friction;\r\n      this.vy *= 1 - this.friction;\r\n      if (isPressed(Key.SPACE)) {\r\n        onCreateBullet({\r\n          x: this.x + (cosine * 30) / 2,\r\n          y: this.y + (sine * 35) / 2,\r\n          vx: this.vx + cosine * 10,\r\n          vy: this.vy + sine * 10,\r\n        });\r\n      }\r\n\r\n      physicalUpdate(this);\r\n    },\r\n    onCollisionWith(other) {},\r\n  };\r\n}\r\n\r\nenum Key {\r\n  LEFT = 0,\r\n  RIGHT,\r\n  UP,\r\n  DOWN,\r\n  SPACE,\r\n}\r\n\r\ntype KeyStates = { [key: string]: boolean };\r\n\r\ntype ControlScheme = (keyStates: KeyStates, key: Key) => boolean;\r\n\r\nfunction isPressed(keyStates: KeyStates, key: string) {\r\n  return keyStates[key] ?? false;\r\n}\r\n\r\nconst basicControlScheme: ControlScheme = (keyStates, key) => {\r\n  if (key === Key.LEFT) {\r\n    return isPressed(keyStates, \"a\") || isPressed(keyStates, \"ArrowLeft\");\r\n  }\r\n  if (key === Key.RIGHT) {\r\n    return isPressed(keyStates, \"d\") || isPressed(keyStates, \"ArrowRight\");\r\n  }\r\n  if (key === Key.DOWN) {\r\n    return isPressed(keyStates, \"s\") || isPressed(keyStates, \"ArrowDown\");\r\n  }\r\n  if (key === Key.UP) {\r\n    return isPressed(keyStates, \"w\") || isPressed(keyStates, \"ArrowUp\");\r\n  }\r\n  if (key === Key.SPACE) {\r\n    return isPressed(keyStates, \"Spacebar\") || isPressed(keyStates, \" \");\r\n  }\r\n  return false;\r\n};\r\n\r\nfunction onKeyStateChange(keyStates: KeyStates, onEventValue: boolean) {\r\n  return (e: KeyboardEvent) => {\r\n    keyStates[e.key] = onEventValue;\r\n  };\r\n}\r\n\r\nfunction loop(timeStepMs: number, update: () => boolean) {\r\n  const i = setInterval(() => {\r\n    if (update()) {\r\n      clearInterval(i);\r\n    }\r\n  }, timeStepMs);\r\n\r\n  return i;\r\n}\r\n\r\nfunction withContext(context: CanvasRenderingContext2D, fn: (ctx: CanvasRenderingContext2D) => void) {\r\n  const oldStyle = context.fillStyle;\r\n  const oldStroke = context.strokeStyle;\r\n  fn(context);\r\n  context.fillStyle = oldStyle;\r\n  context.strokeStyle = oldStroke;\r\n}\r\n\r\nfunction drawTriangle(\r\n  context: CanvasRenderingContext2D,\r\n  style: string,\r\n  x: number,\r\n  y: number,\r\n  base: number,\r\n  height: number,\r\n  rotation: number\r\n) {\r\n  const angle = (rotation * Math.PI) / 180;\r\n  context.translate(x, y);\r\n  context.rotate(angle);\r\n\r\n  withContext(context, () => {\r\n    context.strokeStyle = style;\r\n    context.fillStyle = \"red\";\r\n    context.beginPath();\r\n    context.moveTo(-base / 2, height / 2);\r\n    context.lineTo(0, -height / 2);\r\n    context.lineTo(0 + base / 2 + 1, height / 2);\r\n    context.lineTo(-base / 2, height / 2);\r\n    context.stroke();\r\n  });\r\n\r\n  context.rotate(-angle);\r\n  context.translate(-x, -y);\r\n}\r\n\r\nfunction clear(canvas: HTMLCanvasElement, context: CanvasRenderingContext2D) {\r\n  withContext(context, (context) => {\r\n    context.fillStyle = \"black\";\r\n    context.fillRect(0, 0, canvas.width, canvas.height);\r\n  });\r\n}\r\n\r\nfunction game(controlScheme: ControlScheme) {\r\n  const canvas = document.getElementById(\"asteroids-canvas\") as HTMLCanvasElement | null;\r\n  if (canvas === null) {\r\n    return;\r\n  }\r\n\r\n  const ctx = canvas.getContext(\"2d\");\r\n\r\n  if (ctx === null) {\r\n    return;\r\n  }\r\n\r\n  const keyStates: KeyStates = {};\r\n\r\n  document.onkeydown = onKeyStateChange(keyStates, true);\r\n  document.onkeyup = onKeyStateChange(keyStates, false);\r\n\r\n  const physicsManager = {\r\n    entities: [] as (Entity & Physical & Collides)[],\r\n    nextEntities: [] as (Entity & Physical & Collides)[],\r\n    add(entity: Entity & Physical & Collides) {\r\n      this.nextEntities.push(entity);\r\n    },\r\n    update() {\r\n      for (let entity = 0; entity < this.entities.length; ++entity) {\r\n        for (let otherEntity = 0; otherEntity < this.entities.length; ++otherEntity) {\r\n          if (otherEntity === entity) {\r\n            continue;\r\n          }\r\n          if (\r\n            !this.entities[entity].stale &&\r\n            !this.entities[otherEntity].stale &&\r\n            collidesWith(this.entities[entity], this.entities[otherEntity])\r\n          ) {\r\n            this.entities[entity].onCollisionWith(this.entities[otherEntity]);\r\n            this.entities[otherEntity].onCollisionWith(this.entities[entity]);\r\n          }\r\n        }\r\n        if (!this.entities[entity].stale) {\r\n          this.nextEntities.push(this.entities[entity]);\r\n        }\r\n      }\r\n      this.entities = this.nextEntities;\r\n      this.nextEntities = [];\r\n    },\r\n  };\r\n\r\n  const entityManager = {\r\n    entities: [] as (Entity & Physical)[],\r\n    nextEntities: [] as (Entity & Physical)[],\r\n    render(ctx: CanvasRenderingContext2D) {\r\n      for (const entity of this.entities) {\r\n        withContext(ctx, (ctx) => entity.render(ctx));\r\n      }\r\n    },\r\n    update(isPressed: (key: Key) => boolean) {\r\n      for (const entity of this.entities) {\r\n        entity.update(isPressed);\r\n        entity.x = (entity.x + 600) % 600;\r\n        entity.y = (entity.y + 600) % 600;\r\n        if (!entity.stale) {\r\n          this.nextEntities.push(entity);\r\n        }\r\n      }\r\n\r\n      this.entities = this.nextEntities;\r\n      this.nextEntities = [];\r\n    },\r\n    spawn(entity: Entity & Physical) {\r\n      this.nextEntities.push(entity);\r\n    },\r\n  };\r\n\r\n  const gun = {\r\n    lastTime: 0,\r\n    fire(bullet: Bullet) {\r\n      const currentTime = Date.now();\r\n      if (currentTime - this.lastTime > 300) {\r\n        createPhysical(bulletEntity(bullet));\r\n        this.lastTime = currentTime;\r\n      }\r\n    },\r\n  };\r\n\r\n  const createPhysical = (e: Entity & Physical & Collides) => {\r\n    entityManager.spawn(e);\r\n    physicsManager.add(e);\r\n  };\r\n\r\n  createPhysical(\r\n    shipEntity({ x: 300, y: 300, vx: 0, vy: 0, speed: 0.3, theta: 0, friction: 0.02 }, (bullet) => gun.fire(bullet))\r\n  );\r\n\r\n  const spawnAsteroid = (asteroid: Asteroid) => {\r\n    createPhysical(asteroidEntity(asteroid, spawnAsteroid));\r\n  };\r\n\r\n  for (let i = 0; i < 5; ++i) {\r\n    spawnAsteroid({\r\n      x: Math.random() * 600,\r\n      y: Math.random() * 600,\r\n      vx: Math.random() * 4 - 2,\r\n      vy: Math.random() * 4 - 2,\r\n      width: Math.random() * 40 + 35,\r\n      height: Math.random() * 40 + 35,\r\n    });\r\n  }\r\n\r\n  loop(20, () => {\r\n    clear(canvas, ctx);\r\n    entityManager.render(ctx);\r\n    physicsManager.update();\r\n    entityManager.update((key) => controlScheme(keyStates, key));\r\n    return false;\r\n  });\r\n}\r\n\r\ngame(basicControlScheme);\r\n"],"names":[],"version":3,"file":"index.fb5312c9.js.map","sourceRoot":"/__parcel_source_root/"}